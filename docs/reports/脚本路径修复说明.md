# è„šæœ¬è·¯å¾„ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°

åœ¨é¡¹ç›®æ–‡ä»¶æ•´ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸»ç›®å½•å’Œ `scripts/` ç›®å½•ä¸‹çš„è„šæœ¬æ–‡ä»¶é‡æ–°åˆ†ç±»æ•´ç†åˆ°äº†ä¸åŒçš„å­ç›®å½•ä¸­ã€‚ä½†æ˜¯åœ¨æ•´ç†è¿‡ç¨‹ä¸­ï¼ŒGitHub Actions é…ç½®æ–‡ä»¶å’Œ package.json ä¸­çš„è„šæœ¬è·¯å¾„å¼•ç”¨æ²¡æœ‰åŒæ­¥æ›´æ–°ï¼Œå¯¼è‡´ CI æ„å»ºå¤±è´¥ã€‚

## ä¿®å¤å†…å®¹

### ğŸ—‚ï¸ **è„šæœ¬æ–‡ä»¶é‡æ–°ç»„ç»‡**

**åŸå§‹ç»“æ„**ï¼š
```
scripts/
â”œâ”€â”€ deploy-backend.sh
â”œâ”€â”€ deploy.sh
â”œâ”€â”€ test-mongodb.sh
â”œâ”€â”€ wait-services-simple.sh
â”œâ”€â”€ ...
```

**æ–°ç»“æ„**ï¼š
```
scripts/
â”œâ”€â”€ ci/                   # CIç›¸å…³è„šæœ¬
â”‚   â”œâ”€â”€ ci-start.sh
â”‚   â”œâ”€â”€ ci-stop.sh
â”‚   â”œâ”€â”€ wait-services-simple.sh
â”‚   â””â”€â”€ wait-services.sh
â”œâ”€â”€ database/             # æ•°æ®åº“ç›¸å…³è„šæœ¬
â”‚   â”œâ”€â”€ mongodb-tunnel.sh
â”‚   â”œâ”€â”€ quick-sync.sh
â”‚   â”œâ”€â”€ sync-database.sh
â”‚   â””â”€â”€ verify-database.sh
â”œâ”€â”€ deployment/           # éƒ¨ç½²ç›¸å…³è„šæœ¬
â”‚   â”œâ”€â”€ deploy-backend.sh
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â”œâ”€â”€ deploy-nginx.sh
â”‚   â””â”€â”€ deploy-prod.sh
â”œâ”€â”€ development/          # å¼€å‘ç›¸å…³è„šæœ¬
â”‚   â”œâ”€â”€ cleanup-project.sh
â”‚   â”œâ”€â”€ clear-cache.sh
â”‚   â”œâ”€â”€ debug-services.sh
â”‚   â”œâ”€â”€ dev-start.sh
â”‚   â”œâ”€â”€ dev-stop.sh
â”‚   â”œâ”€â”€ diagnose-backend.sh
â”‚   â”œâ”€â”€ monitor.sh
â”‚   â””â”€â”€ setup-dev-env.sh
â”œâ”€â”€ testing/              # æµ‹è¯•ç›¸å…³è„šæœ¬
â”‚   â”œâ”€â”€ test-frontend-performance.js
â”‚   â”œâ”€â”€ test-mongodb.sh
â”‚   â”œâ”€â”€ test-redis-enhanced.sh
â”‚   â””â”€â”€ test-redis.sh
â”œâ”€â”€ github-actions/       # GitHub Actions ç›¸å…³
â””â”€â”€ pinia-persistence/    # Pinia æŒä¹…åŒ–ç›¸å…³
```

### ğŸ”§ **è·¯å¾„å¼•ç”¨ä¿®å¤**

#### 1. GitHub Actions é…ç½®æ–‡ä»¶

**æ–‡ä»¶**: `.github/workflows/playwright.yml`
```diff
- bash scripts/wait-services-simple.sh --timeout 180 --verbose
+ bash scripts/ci/wait-services-simple.sh --timeout 180 --verbose

- ./scripts/test-mongodb.sh
+ ./scripts/testing/test-mongodb.sh

- REDIS_HOST=localhost ./scripts/test-redis-enhanced.sh
+ REDIS_HOST=localhost ./scripts/testing/test-redis-enhanced.sh
```

**æ–‡ä»¶**: `.github/workflows/ci.yml`
```diff
- bash scripts/wait-services-simple.sh --timeout 120 --verbose
+ bash scripts/ci/wait-services-simple.sh --timeout 120 --verbose

- ./scripts/test-mongodb.sh
+ ./scripts/testing/test-mongodb.sh

- ./scripts/test-redis.sh
+ ./scripts/testing/test-redis.sh
```

#### 2. Package.json è„šæœ¬é…ç½®

**æ–‡ä»¶**: `package.json`
```diff
- "deploy:backend": "bash scripts/deploy-backend.sh"
+ "deploy:backend": "bash scripts/deployment/deploy-backend.sh"

- "deploy:aliyun": "bash scripts/deploy-frontend.sh"
+ "deploy:aliyun": "bash scripts/deployment/deploy.sh"

- "db:sync": "bash scripts/quick-sync.sh"
+ "db:sync": "bash scripts/database/quick-sync.sh"

- "db:sync-full": "bash scripts/sync-database.sh"
+ "db:sync-full": "bash scripts/database/sync-database.sh"

- "db:tunnel": "bash scripts/mongodb-tunnel.sh"
+ "db:tunnel": "bash scripts/database/mongodb-tunnel.sh"

- "db:verify": "bash scripts/verify-database.sh"
+ "db:verify": "bash scripts/database/verify-database.sh"
```

#### 3. æ¸…ç†ä¸å­˜åœ¨çš„è„šæœ¬å¼•ç”¨

ç§»é™¤äº†ä¸å­˜åœ¨çš„è„šæœ¬å¼•ç”¨ï¼š
```diff
- "test:api": "node scripts/test-api-connectivity.mjs"
```

### ğŸ§¹ **ä¸´æ—¶æ–‡ä»¶æ¸…ç†**

åˆ é™¤äº†ä»¥ä¸‹ä¸´æ—¶æ–‡ä»¶ï¼š
- `frontend.log` - å‰ç«¯è¿è¡Œæ—¥å¿—æ–‡ä»¶
- `dump.rdb` - Redis æ•°æ®dumpæ–‡ä»¶
- `.DS_Store` - macOS ç³»ç»Ÿæ–‡ä»¶

### âš™ï¸ **æƒé™ä¿®å¤**

ç¡®ä¿æ‰€æœ‰è„šæœ¬æ–‡ä»¶å…·æœ‰æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x scripts/**/*.sh
```

## éªŒè¯ç»“æœ

### âœ… **æœ¬åœ°æµ‹è¯•é€šè¿‡**
```bash
npm run test:e2e:basic
# âœ… 15 passed (30.1s)
```

### ğŸ” **æ–‡ä»¶ç»“æ„éªŒè¯**
```bash
# æ£€æŸ¥è„šæœ¬åˆ†ç±»
ls scripts/*/
# ci/ database/ deployment/ development/ testing/
```

## å½±å“è¯„ä¼°

### ğŸ¯ **è§£å†³çš„é—®é¢˜**
1. **CI æ„å»ºå¤±è´¥** - ä¿®å¤äº† GitHub Actions ä¸­çš„è„šæœ¬è·¯å¾„å¼•ç”¨é”™è¯¯
2. **Package.json é”™è¯¯** - æ›´æ–°äº†æ‰€æœ‰ npm è„šæœ¬çš„è·¯å¾„å¼•ç”¨
3. **æ–‡ä»¶ç»„ç»‡æ··ä¹±** - æŒ‰åŠŸèƒ½åˆ†ç±»æ•´ç†äº†æ‰€æœ‰è„šæœ¬æ–‡ä»¶
4. **ä¸´æ—¶æ–‡ä»¶å †ç§¯** - æ¸…ç†äº†ä¸å¿…è¦çš„ä¸´æ—¶æ–‡ä»¶

### ğŸ“‹ **éœ€è¦æ³¨æ„çš„äº‹é¡¹**
1. **æ–‡æ¡£æ›´æ–°** - å…¶ä»–æ–‡æ¡£ä¸­çš„è„šæœ¬è·¯å¾„å¼•ç”¨å¯èƒ½éœ€è¦åç»­æ›´æ–°
2. **å›¢é˜Ÿé€šçŸ¥** - éœ€è¦é€šçŸ¥å›¢é˜Ÿæˆå‘˜æ–°çš„è„šæœ¬ç›®å½•ç»“æ„
3. **IDE é…ç½®** - å¯èƒ½éœ€è¦æ›´æ–° IDE ä¸­çš„è¿è¡Œé…ç½®

## åç»­ä¼˜åŒ–å»ºè®®

### ğŸ“– **æ–‡æ¡£åŒæ­¥**
- æ›´æ–° README.md ä¸­çš„éƒ¨ç½²è¯´æ˜
- æ›´æ–°å¼€å‘æŒ‡å—ä¸­çš„è„šæœ¬ä½¿ç”¨è¯´æ˜
- åˆ›å»ºè„šæœ¬åŠŸèƒ½ç´¢å¼•æ–‡æ¡£

### ğŸ”’ **è·¯å¾„ç¨³å®šæ€§**
- åœ¨ CI é…ç½®ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„é¿å…ç¡¬ç¼–ç 
- è€ƒè™‘åˆ›å»ºè„šæœ¬åˆ«åæˆ–è½¯é“¾æ¥
- æ·»åŠ è·¯å¾„éªŒè¯æµ‹è¯•

### ğŸš€ **è‡ªåŠ¨åŒ–æ”¹è¿›**
- åˆ›å»ºè„šæœ¬è·¯å¾„æ£€æŸ¥å·¥å…·
- æ·»åŠ  pre-commit hook éªŒè¯è„šæœ¬å¼•ç”¨
- è€ƒè™‘ä½¿ç”¨é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†è„šæœ¬è·¯å¾„

---

**ä¿®å¤æ—¶é—´**: 2024å¹´12æœˆ19æ—¥
**ä¿®å¤ç‰ˆæœ¬**: v1.1.1
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶éªŒè¯
**å½±å“èŒƒå›´**: CI/CD æµç¨‹ã€æœ¬åœ°å¼€å‘è„šæœ¬ã€æ–‡ä»¶ç»„ç»‡ç»“æ„
