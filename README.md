# å±±ä¸œçœæ€æ”¿è¯¾ä¸€ä½“åŒ–ä¸­å¿ƒ - å…¨æ ˆé¡¹ç›®

> åŸºäº Vue3 + TypeScript + Node.js + MongoDB æ„å»ºçš„ç°ä»£åŒ–æ€æ”¿æ•™è‚²å¹³å°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„å…¨æ ˆåº”ç”¨ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªé›†æ–°é—»èµ„è®¯ã€æ•™å­¦èµ„æºã€åœ¨çº¿æ´»åŠ¨å’Œåå°ç®¡ç†äºä¸€ä½“çš„æ€æ”¿æ•™è‚²å¹³å°ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

| é¡¹ç›®ä¿¡æ¯     | å†…å®¹                                 |
| ------------ | ------------------------------------ |
| **é¡¹ç›®åç§°** | å±±ä¸œçœæ€æƒ³æ”¿æ²»ç†è®ºè¯¾ä¸€ä½“åŒ–æ•™è‚²å¹³å°   |
| **ç”Ÿäº§åŸŸå** | https://horsduroot.com               |
| **æœåŠ¡å™¨**   | é˜¿é‡Œäº‘ECS (60.205.124.67)            |
| **ç®¡ç†åå°** | https://horsduroot.com/admin         |
| **æ¶æ„ç±»å‹** | åŒå‰ç«¯ç³»ç»Ÿï¼ˆå…¬ä¼—å‰å° + ç®¡ç†åå°CMSï¼‰ |

## ğŸ“š é¡¹ç›®æ–‡æ¡£ä¸æŒ‡å—

æœ¬é¡¹ç›®æ‹¥æœ‰è¯¦ç»†çš„å¼€å‘ä¸æ¶æ„æ–‡æ¡£ï¼Œæ˜¯ç†è§£é¡¹ç›®ã€å‚ä¸å¼€å‘çš„å…³é”®ã€‚

- ğŸ“– **[å¼€å‘æŒ‡å— (DEV_GUIDE.md)](./DEV_GUIDE.md)**: **é¦–é€‰é˜…è¯»ï¼** åŒ…å«é¡¹ç›®æ¦‚è§ˆã€æŠ€æœ¯æ ˆã€ç¯å¢ƒé…ç½®ã€éƒ¨ç½²æµç¨‹å’Œæœ€ä½³å®è·µçš„å®Œæ•´æŒ‡å—
- ğŸ“‚ **[æ¶æ„æ–‡æ¡£](./dev-docs/)**: åŒ…å«å‰ç«¯ã€åç«¯ã€çŠ¶æ€ç®¡ç†ã€è·¯ç”±ç­‰å¤šä¸ªå±‚é¢çš„è¯¦ç»†æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ› ï¸ æŠ€æœ¯æ ˆæ¶æ„

<details>
<summary><strong>ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æŠ€æœ¯æ ˆ</strong></summary>

### å‰ç«¯æŠ€æœ¯æ ˆ

- **æ ¸å¿ƒæ¡†æ¶**: Vue 3.3.4 + TypeScript 5.2.0
- **æ„å»ºå·¥å…·**: Vite 4.4.9
- **UIç»„ä»¶åº“**: Element Plus 2.3.14 + Ant Design Vue 4.0.3
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1.6 + æŒä¹…åŒ–æ’ä»¶
- **è·¯ç”±**: Vue Router 4.2.4ï¼ˆåµŒå¥—è·¯ç”± + æƒé™æ§åˆ¶ï¼‰
- **HTTPå®¢æˆ·ç«¯**: Axios ^1.5.0

### åç«¯æŠ€æœ¯æ ˆ

- **è¿è¡Œç¯å¢ƒ**: Node.js (ES Modules)
- **Webæ¡†æ¶**: Express 4.18.2
- **æ•°æ®åº“**: MongoDB + Mongoose 8.1.1
- **è®¤è¯**: JWT + bcrypt
- **è¿›ç¨‹ç®¡ç†**: PM2
- **å®‰å…¨ç»„ä»¶**: helmet, cors, rate-limit

### åŸºç¡€è®¾æ–½

- **æ•°æ®åº“**: MongoDB (ç»Ÿä¸€ä½¿ç”¨ `sdszk` åº“å)
- **ç¼“å­˜**: Redis (ä¼šè¯ç®¡ç†ã€æ•°æ®ç¼“å­˜)
- **WebæœåŠ¡å™¨**: Nginx (SSL + åå‘ä»£ç†)
- **ç³»ç»Ÿ**: Ubuntu 20.04

</details>

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. ç¯å¢ƒè¦æ±‚

- Node.js >= 18.x
- MongoDB >= 6.x
- Redis (å¯é€‰ï¼Œç”¨äºç¼“å­˜)
- pnpm >= 8.x (æ¨è)

### 2. ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repository-url> sdszk-redesign
cd sdszk-redesign

# ğŸŸ¢ ä¸€é”®å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
./scripts/development/dev-start.sh
# è‡ªåŠ¨å¯åŠ¨: Redisã€MongoDBã€åç«¯æœåŠ¡å™¨ã€å‰ç«¯æœåŠ¡å™¨
# è®¿é—®: http://localhost:5173 (å‰ç«¯) | http://localhost:3000 (API)

# ğŸ”´ åœæ­¢å¼€å‘ç¯å¢ƒ
./scripts/development/dev-stop.sh
# è‡ªåŠ¨æ¸…ç†æ‰€æœ‰ç›¸å…³è¿›ç¨‹å’Œç«¯å£
```

### 3. æ‰‹åŠ¨å¯åŠ¨ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

```bash
# 1. å®‰è£…ä¾èµ–
npm install                          # å‰ç«¯ä¾èµ–
cd server && npm install && cd ..    # åç«¯ä¾èµ–

# 2. ç¯å¢ƒé…ç½®åˆå§‹åŒ–
./scripts/development/setup-dev-env.sh    # è‡ªåŠ¨åˆ›å»º.envé…ç½®

# 3. å¯åŠ¨æœåŠ¡ï¼ˆæ¨èé¡ºåºï¼‰
# ç»ˆç«¯1ï¼šå…ˆå¯åŠ¨åç«¯
npm run server:dev                   # åç«¯å¼€å‘æœåŠ¡å™¨ (localhost:3000)

# ç»ˆç«¯2ï¼šå†å¯åŠ¨å‰ç«¯
npm run dev                          # å‰ç«¯å¼€å‘æœåŠ¡å™¨ (localhost:5173)
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
sdszk-redesign/
â”œâ”€â”€ src/                    # å‰ç«¯æºä»£ç  (Vue 3)
â”‚   â”œâ”€â”€ api/                # APIæ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ components/         # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ stores/             # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ views/              # é¡µé¢è§†å›¾
â”‚   â””â”€â”€ ...
â”œâ”€â”€ server/                 # åç«¯æºä»£ç  (Node.js + Express)
â”‚   â”œâ”€â”€ controllers/        # æ§åˆ¶å™¨ (ä¸šåŠ¡é€»è¾‘)
â”‚   â”œâ”€â”€ models/             # Mongooseæ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/             # APIè·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ middleware/         # Expressä¸­é—´ä»¶
â”‚   â””â”€â”€ ...
â”œâ”€â”€ scripts/                # è‡ªåŠ¨åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ development/        # å¼€å‘ç¯å¢ƒè„šæœ¬
â”‚   â”œâ”€â”€ deployment/         # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“ç®¡ç†è„šæœ¬
â”‚   â””â”€â”€ testing/            # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ dev-docs/               # è¯¦ç»†æ¶æ„æ–‡æ¡£
â””â”€â”€ DEV_GUIDE.md           # æ ¸å¿ƒå¼€å‘æŒ‡å—
```

## ğŸ”§ ç¯å¢ƒé…ç½®

### é…ç½®æ–‡ä»¶å¯¹åº”å…³ç³»

| ç¯å¢ƒ     | å‰ç«¯é…ç½®           | åç«¯é…ç½®                 | ç”¨é€”                 |
| -------- | ------------------ | ------------------------ | -------------------- |
| **å¼€å‘** | `.env.development` | `server/.env`            | æœ¬åœ°å¼€å‘ï¼ŒAPI: /api  |
| **ç”Ÿäº§** | `.env.aliyun`      | `server/.env.production` | é˜¿é‡Œäº‘éƒ¨ç½²ï¼ŒåŒåŸŸéƒ¨ç½² |

### å…³é”®ç¯å¢ƒå˜é‡

#### å‰ç«¯é…ç½®

```bash
# .env.development / .env.aliyun
VITE_API_BASE_URL=/api              # APIåŸºç¡€è·¯å¾„
VITE_APP_DEBUG=true/false          # è°ƒè¯•æ¨¡å¼
VITE_CACHE_ENABLED=true            # ç¼“å­˜å¼€å…³
```

#### åç«¯é…ç½®

```bash
# server/.env / server/.env.production
MONGODB_URI=mongodb://localhost:27017/sdszk  # æ•°æ®åº“è¿æ¥
JWT_SECRET=<ç”Ÿäº§ç¯å¢ƒå¼ºå¯†é’¥>                   # JWTå¯†é’¥
FRONTEND_URL=https://horsduroot.com          # å‰ç«¯åŸŸå
REDIS_HOST=127.0.0.1                        # Redisä¸»æœº
PORT=3000                                    # æœåŠ¡ç«¯å£
```

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

é¡¹ç›®çš„éƒ¨ç½²æµç¨‹å·²é«˜åº¦è‡ªåŠ¨åŒ–ï¼Œé€šè¿‡è„šæœ¬å®Œæˆã€‚

### å‰ç«¯éƒ¨ç½²

```bash
# å®Œæ•´å‰ç«¯éƒ¨ç½²æµç¨‹
npm run build:aliyun         # æ„å»ºç”Ÿäº§ç‰ˆæœ¬ (.env.aliyun)
npm run deploy:aliyun        # éƒ¨ç½²åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨

# æˆ–ç›´æ¥ä½¿ç”¨è„šæœ¬ï¼š
./scripts/deployment/deploy.sh
```

### åç«¯éƒ¨ç½²

```bash
# å®Œæ•´åç«¯éƒ¨ç½²æµç¨‹
npm run deploy:backend       # éƒ¨ç½²åç«¯æœåŠ¡

# æˆ–ç›´æ¥ä½¿ç”¨è„šæœ¬ï¼š
./scripts/deployment/deploy-backend.sh
```

### Nginx é…ç½®

```bash
# æ›´æ–° Nginx é…ç½®
./scripts/deployment/deploy-nginx.sh
```

> **æ³¨æ„**: æ‰§è¡Œéƒ¨ç½²è„šæœ¬å‰ï¼Œè¯·ç¡®ä¿å·²æ ¹æ® `DEV_GUIDE.md` æ­£ç¡®é…ç½®äº†æœåŠ¡å™¨å…å¯†ç™»å½•å’Œè„šæœ¬ä¸­çš„ç›®æ ‡è·¯å¾„ã€‚

## ğŸ’¾ æ•°æ®åº“ç®¡ç†

é¡¹ç›®æä¾›äº†å®Œæ•´çš„æ•°æ®åº“ç®¡ç†è„šæœ¬ï¼š

```bash
# å¿«é€Ÿæ•°æ®åº“åŒæ­¥ï¼ˆæ¨èæ—¥å¸¸ä½¿ç”¨ï¼‰
npm run db:sync

# å®Œæ•´æ•°æ®åº“åŒæ­¥å·¥å…·ï¼ˆäº¤äº’å¼èœå•ï¼‰
npm run db:sync-full

# SSHéš§é“è¿æ¥ï¼ˆåªè¯»è®¿é—®ï¼‰
npm run db:tunnel

# æ•°æ®åº“éªŒè¯
npm run db:verify
```

## ğŸ§ª æµ‹è¯•

é¡¹ç›®é…ç½®äº†å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼š

```bash
# å•å…ƒæµ‹è¯•
npm run test                 # Vitest å•å…ƒæµ‹è¯•
npm run test:coverage       # æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š

# E2Eæµ‹è¯•
npm run test:e2e            # Playwright E2Eæµ‹è¯•
npm run test:e2e:ui         # å¯è§†åŒ–æµ‹è¯•ç•Œé¢

# ä»£ç è´¨é‡æ£€æŸ¥
npm run lint                # ESLint æ£€æŸ¥
npm run format              # Prettier æ ¼å¼åŒ–
```

## ğŸ› ï¸ å¼€å‘å·¥å…·è„šæœ¬

```bash
# ç¯å¢ƒè¯Šæ–­å’Œæ¸…ç†
./scripts/development/diagnose-backend.sh    # åç«¯ç¯å¢ƒè¯Šæ–­
./scripts/development/cleanup-project.sh     # é¡¹ç›®æ¸…ç†
./scripts/development/clear-cache.sh         # æ¸…ç†ç¼“å­˜
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿å‚ä¸é¡¹ç›®è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feat/AmazingFeature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feat/AmazingFeature`)
5. æäº¤ Pull Request

### Git æäº¤è§„èŒƒ

```bash
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·é“¾æ›´æ–°
```

è¯·ç¡®ä¿æ‚¨çš„ä»£ç éµå¾ªé¡¹ç›®å·²é…ç½®çš„ ESLint å’Œ Prettier è§„èŒƒã€‚

## ğŸ“š ç›¸å…³æ–‡æ¡£

- ğŸ“– [DEV_GUIDE.md](./DEV_GUIDE.md) - å®Œæ•´å¼€å‘æŒ‡å—
- ğŸ“‚ [dev-docs/](./dev-docs/) - è¯¦ç»†æ¶æ„æ–‡æ¡£
- ğŸ”§ [scripts/](./scripts/) - è‡ªåŠ¨åŒ–è„šæœ¬è¯´æ˜

## ğŸŠ å¿«é€ŸéªŒè¯

### éªŒè¯å¼€å‘ç¯å¢ƒ

```bash
# æ£€æŸ¥å‰ç«¯æœåŠ¡
curl http://localhost:5173

# æ£€æŸ¥åç«¯API
curl http://localhost:3000/api/health
```

### éªŒè¯ç”Ÿäº§ç¯å¢ƒ

```bash
# æ£€æŸ¥ç”Ÿäº§ç«™ç‚¹
curl https://horsduroot.com

# æ£€æŸ¥APIå¥åº·çŠ¶æ€
curl https://horsduroot.com/api/health
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚
