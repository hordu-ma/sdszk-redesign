# å±±ä¸œçœæ€æ”¿è¯¾ä¸€ä½“åŒ–ä¸­å¿ƒå¹³å°

> Vue3 + TypeScript + Node.js + MongoDB çš„å…¨æ ˆ CMS / å†…å®¹ä¸æƒé™ç®¡ç†å¹³å°

æœ¬ä»“åº“åŒ…å«å‰å°å±•ç¤ºä¸åå°ç®¡ç†ï¼ˆåŒå…¥å£ï¼‰ï¼Œæ”¯æŒæ–°é—»/èµ„æºç®¡ç†ã€ç”¨æˆ·ä¸è§’è‰²æƒé™ï¼ˆRBACï¼‰ã€æ´»åŠ¨ä¸æ—¥å¿—ç­‰æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ã€‚å®Œæ•´æ·±å…¥æ–‡æ¡£è¯·è·³è½¬ï¼š`docs/README.md`ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

| é¡¹ç›®ä¿¡æ¯     | å†…å®¹                                       |
| ------------ | ------------------------------------------ |
| **é¡¹ç›®åç§°** | å±±ä¸œçœå¤§ä¸­å°å­¦æ€æ”¿è¯¾ä¸€ä½“åŒ–å»ºè®¾æŒ‡å¯¼ä¸­å¿ƒå¹³å° |
| **ç”Ÿäº§åŸŸå** | https://www.sdszk.cn                       |
| **æœåŠ¡å™¨**   | é˜¿é‡Œäº‘ (8.141.113.21)                      |
| **ç®¡ç†åå°** | https://www.sdszk.cn/admin                 |
| **æ¶æ„ç±»å‹** | åŒå‰ç«¯ç³»ç»Ÿ(å…¬ä¼—å‰å° + ç®¡ç†åå°CMS)         |

## ğŸ—ï¸ æŠ€æœ¯æ ˆé€Ÿè§ˆ

| å±‚   | æ ¸å¿ƒæŠ€æœ¯                      | è¯´æ˜                             |
| ---- | ----------------------------- | -------------------------------- |
| å‰ç«¯ | Vue 3.5 / TypeScript / Vite   | æŒ‰éœ€åŠ è½½ + æ¨¡å—åŒ– API å°è£…       |
| UI   | Element Plus / Ant Design Vue | ç»„åˆä½¿ç”¨ï¼Œåç»­å°†è¯„ä¼°è£å‰ª         |
| çŠ¶æ€ | Pinia                         | æ”¯æŒæŒä¹…åŒ–ä¸æƒé™æ´¾ç”Ÿ             |
| åç«¯ | Node.js / Express             | æ¨¡å—åŒ–è·¯ç”± + ä¸­é—´ä»¶é“¾            |
| æ•°æ® | MongoDB + Mongoose            | ä¸»è¦æ¨¡å‹è§ä¸‹æ–¹ç»“æ„               |
| ç¼“å­˜ | Redis                         | çƒ­ç‚¹æ•°æ® / éªŒè¯ç  / æœªæ¥é˜Ÿåˆ—é¢„ç•™ |
| è¿›ç¨‹ | PM2                           | è¿›ç¨‹å®ˆæŠ¤ / å¥åº·æ£€æŸ¥è„šæœ¬é…åˆ      |
| ä»£ç† | Nginx                         | SSL / åå‘ä»£ç† / é™æ€æ‰˜ç®¡        |

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆå¼€å‘ï¼‰

å‰ç½®ä¾èµ–ï¼šNode.js >= 18ï¼ŒMongoDB 6+ï¼ˆæœ¬åœ°æˆ–è¿œç¨‹ï¼‰ï¼Œå¯é€‰ Redisã€‚

```bash
# å®‰è£…ä¾èµ–
npm install && cd server && npm install && cd ..

# ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼šè‡ªåŠ¨å¯åŠ¨å‰åç«¯+ä¾èµ–ï¼‰
./scripts/development/dev-start.sh

# åœæ­¢
./scripts/development/dev-stop.sh

# æˆ–æ‰‹åŠ¨ï¼ˆå¦‚éœ€è°ƒè¯•åˆ†ç¦»è¿›ç¨‹ï¼‰
npm run server:dev &   # API :3000
npm run dev            # Frontend :5173
```

å¥åº·æ£€æŸ¥ï¼š`curl http://localhost:3000/api/health` & `http://localhost:5173`ã€‚

## ï¿½ æƒé™ä¸å®‰å…¨ï¼ˆæ¦‚è¿°ï¼‰

RBACï¼ˆä¸‰å±‚ï¼šç”¨æˆ·/è§’è‰²/æƒé™ï¼‰+ åŸºäº `module:action` è¯­ä¹‰çš„ç»†ç²’åº¦æ§åˆ¶ï¼›å‰ç«¯åŸºäºæŒ‡ä»¤/è·¯ç”±å®ˆå«ï¼Œåç«¯ç»Ÿä¸€ `protect -> permission` ä¸­é—´ä»¶ã€‚åˆå§‹åŒ–æˆ–é‡ç½®ï¼š`node scripts/database/init-roles-permissions.js`ã€‚è¯¦ç»†æ¨¡å‹ä¸ç­–ç•¥å°†åœ¨ `docs/security/` ä¸­æä¾›ï¼ˆBatch 2ï¼‰ã€‚

## ğŸ¢ ä¸šåŠ¡èŒƒå›´ï¼ˆç²¾ç®€ï¼‰

å†…å®¹ï¼ˆæ–°é—» / èµ„æº / åˆ†ç±»ï¼‰ + ç”¨æˆ·äº¤äº’ï¼ˆæ”¶è— / æµè§ˆ / æ“ä½œæ—¥å¿—ï¼‰ + åå°ç®¡ç†ï¼ˆè§’è‰² / æƒé™ / è®¾ç½®ï¼‰ã€‚å®Œæ•´å­—æ®µä¸è¡Œä¸ºï¼šå‚è€ƒåç»­æ¶æ„æ–‡æ¡£åˆ†æ‹†ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
sdszk-redesign/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ News.vue      # å‰å°æ–°é—»
â”‚   â”‚   â””â”€â”€ admin/        # ç®¡ç†åå°
â”‚   â”œâ”€â”€ api/modules/       # APIå°è£…
â”‚   â”œâ”€â”€ stores/           # PiniaçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ components/       # ç»„ä»¶åº“
â”œâ”€â”€ server/                # åç«¯æºç 
â”‚   â”œâ”€â”€ controllers/      # ä¸šåŠ¡æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/          # APIè·¯ç”±
â”‚   â””â”€â”€ middleware/      # ä¸­é—´ä»¶
â”œâ”€â”€ scripts/              # è‡ªåŠ¨åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ development/     # å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ deployment/      # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ database/        # æ•°æ®åº“ç®¡ç†
â””â”€â”€ docs/                # è¯¦ç»†æ–‡æ¡£
```

## ğŸš€ é˜¿é‡Œäº‘éƒ¨ç½²

**æ€»æ˜¯ä½¿ç”¨scripts/deploymentç›®å½•ä¸‹çš„è„šæœ¬è¿›è¡Œéƒ¨ç½²ï¼Œé¿å…é—æ¼æ­¥éª¤ã€‚**

### ğŸ¯ éƒ¨ç½²å·¥å…·æ¦‚è§ˆ

| å·¥å…·                  | ç”¨é€”           | ç‰¹ç‚¹                         |
| --------------------- | -------------- | ---------------------------- |
| `deploy-aliyun.sh`    | ç»Ÿä¸€éƒ¨ç½²ç®¡ç†å™¨ | åŠŸèƒ½å®Œæ•´ã€é”™è¯¯å¤„ç†ã€å›æ»šæ”¯æŒ |
| `quick-deploy.sh`     | å¿«é€Ÿéƒ¨ç½²å·¥å…·   | ç®€åŒ–æ“ä½œã€å¿«é€Ÿè¿­ä»£           |
| `check-deployment.sh` | éƒ¨ç½²çŠ¶æ€æ£€æŸ¥   | å…¨é¢è¯Šæ–­ã€å¥åº·è¯„åˆ†           |
| `pm2-manager.sh`      | PM2æœåŠ¡ç®¡ç†    | è¿›ç¨‹ç»´æŠ¤ã€æ—¥å¿—ç›‘æ§           |

### âš¡ å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

## ï¿½ éƒ¨ç½²ï¼ˆé€Ÿè§ˆï¼‰

ä½¿ç”¨ `scripts/deployment/` ä¸‹è„šæœ¬ï¼ˆ`quick-deploy.sh` / `deploy-aliyun.sh` / å¥åº·æ£€æŸ¥ `check-deployment.sh`ï¼‰ã€‚è¯¦è§ï¼š`docs/deployment-guide.md`ã€‚

1. **éƒ¨ç½²å‰æ£€æŸ¥**ï¼šç¡®ä¿ä»£ç å·²æäº¤ã€æµ‹è¯•é€šè¿‡ã€é…ç½®æ–‡ä»¶å®Œæ•´
2. **é€‰æ‹©åˆé€‚å·¥å…·**ï¼šæ—¥å¸¸å¼€å‘ç”¨å¿«é€Ÿéƒ¨ç½²ï¼Œç”Ÿäº§å‘å¸ƒç”¨ç»Ÿä¸€ç®¡ç†å™¨
3. **éƒ¨ç½²åéªŒè¯**ï¼šè¿è¡Œå¥åº·æ£€æŸ¥ç¡®ä¿æœåŠ¡æ­£å¸¸
4. **ç›‘æ§ç»´æŠ¤**ï¼šå®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—

### ç¯å¢ƒé…ç½®

- **å¼€å‘ç¯å¢ƒ**: `.env.development` + `server/.env`
- **ç”Ÿäº§ç¯å¢ƒ**: `.env.aliyun` + `server/.env.production`

## ğŸ§ª æµ‹è¯•ï¼ˆæ¦‚è§ˆï¼‰

Vitestï¼ˆå•å…ƒ & ç»„ä»¶ï¼‰+ Playwrightï¼ˆE2Eï¼‰+ è®¡åˆ’ä¸­çš„è¦†ç›–ç‡é—¨ç¦ï¼ˆè§æµ‹è¯•é‡æ„åæ–‡æ¡£ï¼‰ã€‚æš‚å­˜ç­–ç•¥æ–‡æ¡£ï¼š`docs/testing-best-practices.md`ï¼ˆå³å°†æ‹†åˆ†ï¼‰ã€‚

## ğŸ› ï¸ å¸¸ç”¨è„šæœ¬

æ›´å¤šè„šæœ¬ç”¨é€”å³å°†æ±‡æ€»è‡³ï¼š`docs/reference/scripts-catalog.md`

```bash
./scripts/development/dev-start.sh   # å¯åŠ¨æ‰€æœ‰
./scripts/development/dev-stop.sh    # åœæ­¢æ‰€æœ‰
./scripts/deployment/check-deployment.sh  # éƒ¨ç½²å¥åº·æ£€æŸ¥
```

## ğŸ”— APIï¼ˆç¤ºä¾‹è·¯å¾„ï¼‰

å…¬ä¼—ï¼š`/api/news`, `/api/resources`, `/api/auth`ï¼›åå°ï¼š`/api/admin/*`ã€‚æœªæ¥å°†é›†ä¸­åˆ° `docs/reference/api-index.md`ã€‚

## ğŸ¤ å¼€å‘è§„èŒƒ

### Gitæäº¤è§„èŒƒ

```bash
feat: æ–°åŠŸèƒ½        fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°      style: æ ¼å¼è°ƒæ•´
refactor: é‡æ„      test: æµ‹è¯•
chore: æ„å»ºå·¥å…·     perf: æ€§èƒ½ä¼˜åŒ–
```

### ä»£ç è§„èŒƒ

- ES Modules (`"type": "module"`)
- TypeScriptä¸¥æ ¼æ¨¡å¼
- ESLint + Prettierè‡ªåŠ¨æ ¼å¼åŒ–
- Husky Git hooksè´¨é‡æ§åˆ¶

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

```bash
# ç«¯å£å†²çª
./scripts/development/dev-stop.sh    # ä¼˜é›…åœæ­¢å¼€å‘ç¯å¢ƒ

# æ•°æ®åº“è¿æ¥
brew services restart mongodb-community
redis-server --daemonize yes

# ä¾èµ–é—®é¢˜
rm -rf node_modules package-lock.json
npm install
```

### éªŒè¯ç¯å¢ƒ

```bash
# å¼€å‘ç¯å¢ƒ
curl http://localhost:5173
curl http://localhost:3000/api/health

# ç”Ÿäº§ç¯å¢ƒ
curl https://www.sdszk.cn/api/health
```

## ğŸ¤– AI åä½œï¼ˆä¸´æ—¶ä¿ç•™ï¼‰

### ç¯å¢ƒå˜é‡è®¿é—®æœ€ä½³å®è·µ

ç”±äºå®‰å…¨ç­–ç•¥ï¼Œå¤§æ¨¡å‹æ— æ³•ç›´æ¥è¯»å– `.env` æ–‡ä»¶ã€‚å½“éœ€è¦äº†è§£ç¯å¢ƒå˜é‡é…ç½®æ—¶ï¼Œè¯·å‚è€ƒï¼š

1. **ğŸ“– ç¯å¢ƒå˜é‡æ–‡æ¡£** - [`docs/environment-variables.md`](./docs/environment-variables.md)
   - åŒ…å«å®Œæ•´çš„ç¯å¢ƒå˜é‡è¯´æ˜
   - å‰ç«¯å’Œåç«¯é…ç½®ç¤ºä¾‹
   - å®‰å…¨æœ€ä½³å®è·µæŒ‡å—

2. **ğŸ”§ æ¨¡æ¿æ–‡ä»¶** - å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹é…ç½®ç»“æ„ï¼š

   ```bash
   # æŸ¥çœ‹ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼ˆå»æ•æ„ŸåŒ–ï¼‰
   cat .env.example          # å‰ç«¯ç¯å¢ƒå˜é‡æ¨¡æ¿
   cat server/.env.example   # åç«¯ç¯å¢ƒå˜é‡æ¨¡æ¿
   ```

3. **ğŸ“‹ é…ç½®æ–‡ä»¶ä½ç½®**ï¼š
   - **å‰ç«¯**: `.env`, `.env.development`, `.env.aliyun`
   - **åç«¯**: `server/.env`, `server/.env.test`, `server/.env.ci`

### å¤§æ¨¡å‹å·¥ä½œæµç¨‹å»ºè®®

1. **ç¯å¢ƒå˜é‡éœ€æ±‚** â†’ æŸ¥é˜… `docs/environment-variables.md`
2. **é¡¹ç›®ç»“æ„äº†è§£** â†’ å‚è€ƒä¸Šæ–¹"é¡¹ç›®ç»“æ„"ç« èŠ‚
3. **APIæ¥å£ä¿¡æ¯** â†’ æŸ¥çœ‹"APIè·¯ç”±"ç« èŠ‚
4. **éƒ¨ç½²ç›¸å…³** â†’ ä½¿ç”¨ `scripts/deployment/` ç›®å½•ä¸‹çš„è„šæœ¬
5. **å¼€å‘ç¯å¢ƒ** â†’ ä½¿ç”¨ `scripts/development/` ç›®å½•ä¸‹çš„è„šæœ¬

### å®‰å…¨æ³¨æ„äº‹é¡¹

- âœ… æ‰€æœ‰çœŸå®çš„æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€å¯†é’¥ï¼‰éƒ½åœ¨ `.env` æ–‡ä»¶ä¸­ï¼Œå·²è¢«å®‰å…¨è¿‡æ»¤
- âœ… å¯å®‰å…¨è®¨è®ºç¯å¢ƒå˜é‡ç»“æ„å’Œé…ç½®æ–¹æ³•
- âœ… æ¨¡æ¿æ–‡ä»¶ (`.env.example`) ä»…åŒ…å«ç¤ºä¾‹å€¼ï¼Œå¯å®‰å…¨è®¿é—®
- âš ï¸ å¦‚éœ€æä¾›å®é™…é…ç½®ï¼Œè¯·æ‰‹åŠ¨å»æ•æ„ŸåŒ–ååˆ†äº«

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- æ–‡æ¡£é¦–é¡µï¼š`docs/README.md`
- éƒ¨ç½²ï¼š`docs/deployment-guide.md`
- ç¯å¢ƒå˜é‡ï¼š`docs/environment-variables.md`
- æ¶æ„ï¼š`docs/architecture/system-overview.md`
- æ¨¡å—è¯¦è§£ï¼š`docs/architecture/backend-modules.md`
- æµ‹è¯•ç­–ç•¥ï¼š`docs/quality/testing-strategy.md`
- æµ‹è¯•åŸºçº¿ï¼š`docs/quality/testing-baseline.md`
- æµ‹è¯•è·¯çº¿ï¼š`docs/quality/testing-roadmap.md`
- å®‰å…¨ï¼ˆRBACï¼‰ï¼š`docs/security/rbac-model.md`
- è®¤è¯ç­–ç•¥ï¼š`docs/security/auth-strategy.md`
- å†å²å®¡æŸ¥ï¼š`docs/archive/2025-09-audit.md`

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

æœ¬ README ä¸“æ³¨â€œå…¥å£ + å¯¼èˆªâ€ï¼Œæ·±åº¦å†…å®¹è¯·è¿›å…¥ `docs/`ã€‚
